import {
  Component,
  ElementRef,
  HostListener,
  OnInit,
  ViewChild,
} from '@angular/core';
import { Subscription } from 'rxjs/internal/Subscription';
import { LanguageCode } from 'src/app/models/blog';
import { IMainPage } from 'src/app/models/pages';
import { ContentService } from 'src/app/services/content.service';
import { LanguageService } from 'src/app/services/language.service';

@Component({
  selector: 'app-main-page',
  templateUrl: './main-page.component.html',
  styleUrls: ['./main-page.component.scss'],
})
export class MainPageComponent implements OnInit {
  scrollEventsCounter = 0;
  isHeaderVisible = false;

  content: IMainPage = standardContent;

  langSubscription!: Subscription;
  subscriber = {
    next: () => {
      console.log("Changing locale");
      this.changeLocalization();
    },
  };

  // @ViewChild('hero') hero: ElementRef | null = null;

  // @HostListener('window:scroll', ['$event']) onScrollEvent($event: any){
  //   if (this.scrollEventsCounter <= 60) {
  //     this.scrollEventsCounter += 1
  //   } else if (!this.isHeaderVisible && this.scrollEventsCounter > 60) {
  //     this.isHeaderVisible = true
  //   }
  // }

  constructor(
    private languageService: LanguageService,
    private contentService: ContentService
  ) {}

  async ngOnInit() {
    this.content = await this.contentService.getMainPage();
    this.langSubscription = this.languageService.langSubject.subscribe(
      this.subscriber
    );
  }

  async changeLocalization() {
    this.content = await this.contentService.getMainPage();
  }
}

const standardContent: IMainPage = {
  id: 2,
  welcome: '–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥  –∫ —Å–ø–æ—Ä—Ç—É.',
  welcomeSubtitle: '–ó–∞–ø–∏—à–∏—Å—å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–∞—Ä–∞—Ñ–æ–Ω —É–∂–µ —Å–µ–π—á–∞—Å!',
  welcomeButton: '–ü–µ—Ä–µ–π—Ç–∏',
  aboutHeader: '–û –ù–êC',
  aboutSecondTextBlock:
    '–ú—ã –≤—ã—Å—Ç—É–ø–∞–µ–º –∑–∞ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏, –∞ —Ç–∞–∫–∂–µ –∑–∞ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å—Ñ–µ—Ä–µ –ø–∏—Ç–∞–Ω–∏—è –∏ —Å–ø–æ—Ä—Ç–∞. –ù–∞—à–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏ –∏–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞—É—á–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π, –∞ —Ç–∞–∫–∂–µ –∏–º–µ—é—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä.',
  aboutFirstTextBlock:
    '–ú–∏—Å—Å–∏—è MIROS - –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ª—é–¥–µ–π –≤–µ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ —á–µ—Ä–µ–∑ —ç—Å—Ç–µ—Ç–∏–∫—É —Å–ø–æ—Ä—Ç–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è \n\n–í –Ω–∞—à–∏—Ö —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö –≤—ã –Ω–∞–π–¥–µ—Ç–µ –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–ø–æ—Ä—Ç–µ, –ø–∏—Ç–∞–Ω–∏–∏ –∏ –∑–¥–æ—Ä–æ–≤–æ–º –æ–±—Ä–∞–∑–µ –∂–∏–∑–Ω–∏, –∞ —Ç–∞–∫–∂–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ –±–ª–∏–∂–∞–π—à–∏—Ö —Ñ–∏—Ç–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è—Ö MiRos',
  aboutSubtitle: '–ù–∞—à–∞ –º–∏—Å—Å–∏—è',
  telegramBotHeader: 'Telegram –±–æ—Ç',
  telegramBotText:
    'MiRos Nutrition, –∑–∞–¥–∞—á–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ - —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –∑–¥–æ—Ä–æ–≤—ã–π —Ä–∞—Ü–∏–æ–Ω —á–µ—Ä–µ–∑ –æ—Ü–µ–Ω–∫—É —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∞ \n\n–ë–æ—Ç —Å–æ–æ–±—â–∏—Ç –æ –µ–¥–µ –≤—Å–µ, —á—Ç–æ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–Ω–∞—Ç—å: –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å, –∫–æ–ª-–≤–æ –±–µ–ª–∫–æ–≤, –∂–∏—Ä–æ–≤ –∏ —É–≥–ª–µ–≤–æ–¥–æ–≤',
  locale: LanguageCode.ru,
  created_at: '2021-10-17T10:20:40.934Z',
  updated_at: '2021-10-17T11:06:38.453Z',
  reviews: {
    id: 4,
    reviewHeader: '–û—Ç–∑—ã–≤—ã',
    reviewText:
      '–ù–∞—à–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Å—Ç–æ –¥–µ–ª—è—Ç—Å—è —ç–º–æ—Ü–∏—è–º–∏ –æ—Ç –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤ –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ MiRos \n\n–ü–æ—Å–ª—É—à–∞–π—Ç–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –æ—Ç —Ç–µ—Ö, –∫—Ç–æ —Å—Ç–∞–ª —á–∞—Å—Ç—å—é –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã!',
    videos: [
      {
        id: 8,
        name: 'video_interesting.mp4',
        alternativeText: '',
        caption: '',
        formats: null,
        hash: 'video_interesting_fb4c10d0fa',
        ext: '.mp4',
        mime: 'video/mp4',
        size: 18619.37,
        url: '/uploads/video_interesting_fb4c10d0fa.mp4',
        provider: 'local',
        provider_metadata: null,
        created_at: '2021-10-17T10:21:58.590Z',
        updated_at: '2021-10-17T10:21:58.599Z',
      },
      {
        id: 7,
        name: 'IMG_0414.MOV',
        alternativeText: '',
        caption: '',
        formats: null,
        hash: 'IMG_0414_6c2bc3c4f8',
        ext: '.MOV',
        mime: 'video/quicktime',
        size: 17394.61,
        url: '/uploads/IMG_0414_6c2bc3c4f8.MOV',
        provider: 'local',
        provider_metadata: null,
        created_at: '2021-10-17T10:21:58.560Z',
        updated_at: '2021-10-17T10:21:58.568Z',
      },
      {
        id: 6,
        name: 'IMG_7462.MOV',
        alternativeText: '',
        caption: '',
        formats: null,
        hash: 'IMG_7462_d03ff83e7b',
        ext: '.MOV',
        mime: 'video/quicktime',
        size: 13936.2,
        url: '/uploads/IMG_7462_d03ff83e7b.MOV',
        provider: 'local',
        provider_metadata: null,
        created_at: '2021-10-17T10:21:58.477Z',
        updated_at: '2021-10-17T10:21:58.508Z',
      },
      {
        id: 5,
        name: 'IMG_8982.MOV',
        alternativeText: '',
        caption: '',
        formats: null,
        hash: 'IMG_8982_5e7b3718fd',
        ext: '.MOV',
        mime: 'video/quicktime',
        size: 12293.97,
        url: '/uploads/IMG_8982_5e7b3718fd.MOV',
        provider: 'local',
        provider_metadata: null,
        created_at: '2021-10-17T10:21:58.429Z',
        updated_at: '2021-10-17T10:21:58.449Z',
      },
      {
        id: 4,
        name: 'miros.MOV',
        alternativeText: '',
        caption: '',
        formats: null,
        hash: 'miros_f65ecfcdf4',
        ext: '.MOV',
        mime: 'video/quicktime',
        size: 1090.26,
        url: '/uploads/miros_f65ecfcdf4.MOV',
        provider: 'local',
        provider_metadata: null,
        created_at: '2021-10-17T10:21:58.254Z',
        updated_at: '2021-10-17T10:21:58.277Z',
      },
    ],
  },
  commentaries: {
    id: 3,
    firstBlock:
      '### –ú–∞—Ä–∞—Ñ–æ–Ω 05.05-16.05\n\n–û—á–µ–Ω—å —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ç–æ—Ç –ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —É—Å–ª—É–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ—Å—ë—Ç –≤ —Å–µ–±–µ —Å—Ç–æ–ª—å–∫–æ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–∞ 100000% –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Å–≤–æ—é —Ü–µ–Ω—É! \n\n–ó–∞ –≤—Ä–µ–º—è –º–∞—Ä–∞—Ñ–æ–Ω–∞ —è –∑–∞–º–µ—Ç–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ–ª–µ, –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏–ª–æ–≤—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –∏ —Ä–∞—Å—Ç—è–∂–∫–µ –æ—Ñ—Ñ–ª–∞–π–Ω! \n\n–ñ–∏–≤—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å —Ç–∞–∫–∏–º–∏ –∂–µ –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–º–∏ –ª—é–¥—å–º–∏ –¥–∞—é—Ç —Å—Ç–∏–º—É–ª –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è! –≠—Ç–æ –ø—Ä—è–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ!!!! –°–ø–∞—Å–∏–±–æ –≤–∞–º –∑–∞ —ç—Ç–æ ‚ô•\nÔ∏è\n–ê —Ç–∞–∫ –∂–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —á—É—Ç–∫–æ—Å—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –≤ –æ–±—â–µ–º —á–∞—Ç–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –±–µ–∑ –≤–Ω–∏–º–∞–Ω–∏—è üíï\nMiRos –≤—ã —Å—É–ø–µ—Ä –∫—Ä—É—Ç—ã–µ‚ùóÔ∏è–†–∞–∑–≤–∏—Ç–∏—è –í–∞–º, –ø–æ–∫–æ—Ä–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—à–∏–Ω‚ùóÔ∏è\n–ñ–¥–∏—Ç–µ –º–µ–Ω—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ä–∞—Ñ–æ–Ω–µ üòâ',
    secondBlock:
      '### –ú–∞—Ä–∞—Ñ–æ–Ω 05.05-16.05 \n–û—á–µ–Ω—å —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ç–æ—Ç –ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —É—Å–ª—É–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ—Å—ë—Ç –≤ —Å–µ–±–µ —Å—Ç–æ–ª—å–∫–æ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–∞ 100000% –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Å–≤–æ—é —Ü–µ–Ω—É! \n\n–ó–∞ –≤—Ä–µ–º—è –º–∞—Ä–∞—Ñ–æ–Ω–∞ —è –∑–∞–º–µ—Ç–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ–ª–µ, –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏–ª–æ–≤—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –∏ —Ä–∞—Å—Ç—è–∂–∫–µ –æ—Ñ—Ñ–ª–∞–π–Ω! \n\n–ñ–∏–≤—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å —Ç–∞–∫–∏–º–∏ –∂–µ –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–º–∏ –ª—é–¥—å–º–∏ –¥–∞—é—Ç —Å—Ç–∏–º—É–ª –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è! –≠—Ç–æ –ø—Ä—è–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ!!!! –°–ø–∞—Å–∏–±–æ –≤–∞–º –∑–∞ —ç—Ç–æ ‚ô•\nÔ∏è\n–ê —Ç–∞–∫ –∂–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —á—É—Ç–∫–æ—Å—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –≤ –æ–±—â–µ–º —á–∞—Ç–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –±–µ–∑ –≤–Ω–∏–º–∞–Ω–∏—è üíï\nMiRos –≤—ã —Å—É–ø–µ—Ä –∫—Ä—É—Ç—ã–µ‚ùóÔ∏è–†–∞–∑–≤–∏—Ç–∏—è –í–∞–º, –ø–æ–∫–æ—Ä–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—à–∏–Ω‚ùóÔ∏è\n–ñ–¥–∏—Ç–µ –º–µ–Ω—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ä–∞—Ñ–æ–Ω–µ üòâ',
    thirdBlock:
      '### –ú–∞—Ä–∞—Ñ–æ–Ω 05.05-16.05\n\n–û—á–µ–Ω—å —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ç–æ—Ç –ø—Ä–æ–¥—É–∫—Ç –∏–ª–∏ —É—Å–ª—É–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ—Å—ë—Ç –≤ —Å–µ–±–µ —Å—Ç–æ–ª—å–∫–æ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–∞ 100000% –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç —Å–≤–æ—é —Ü–µ–Ω—É! \n\n–ó–∞ –≤—Ä–µ–º—è –º–∞—Ä–∞—Ñ–æ–Ω–∞ —è –∑–∞–º–µ—Ç–∏–ª–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ–ª–µ, –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∏–ª–æ–≤—ã–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º –∏ —Ä–∞—Å—Ç—è–∂–∫–µ –æ—Ñ—Ñ–ª–∞–π–Ω! \n\n–ñ–∏–≤—ã–µ –≤—Å—Ç—Ä–µ—á–∏ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å —Ç–∞–∫–∏–º–∏ –∂–µ –∑–∞—Ä—è–∂–µ–Ω–Ω—ã–º–∏ –ª—é–¥—å–º–∏ –¥–∞—é—Ç —Å—Ç–∏–º—É–ª –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è! –≠—Ç–æ –ø—Ä—è–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ!!!! –°–ø–∞—Å–∏–±–æ –≤–∞–º –∑–∞ —ç—Ç–æ ‚ô•\nÔ∏è\n–ê —Ç–∞–∫ –∂–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —á—É—Ç–∫–æ—Å—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –≤ –æ–±—â–µ–º —á–∞—Ç–µ, –Ω–∏—á–µ–≥–æ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –±–µ–∑ –≤–Ω–∏–º–∞–Ω–∏—è üíï\nMiRos –≤—ã —Å—É–ø–µ—Ä –∫—Ä—É—Ç—ã–µ‚ùóÔ∏è–†–∞–∑–≤–∏—Ç–∏—è –í–∞–º, –ø–æ–∫–æ—Ä–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –≤–µ—Ä—à–∏–Ω‚ùóÔ∏è\n–ñ–¥–∏—Ç–µ –º–µ–Ω—è –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ä–∞—Ñ–æ–Ω–µ üòâ',
    blockHeader: "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"  
  },
  localizations: [{ id: 1, locale: LanguageCode.en }],
};
